<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GA4 gtag.js Complete Template</title>

  <!-- OPTIONAL: DNS Prefetch for faster GA4 loading -->
  <link rel="dns-prefetch" href="https://www.googletagmanager.com">
  <link rel="dns-prefetch" href="https://www.google-analytics.com">

  <!-- OPTIONAL: Preconnect for even faster loading (uses more resources) -->
  <!-- <link rel="preconnect" href="https://www.googletagmanager.com">
  <link rel="preconnect" href="https://www.google-analytics.com"> -->

  <!-- ============================================ -->
  <!-- Google tag (gtag.js) - REQUIRED             -->
  <!-- Replace G-XXXXXXXXXX with your Measurement ID -->
  <!-- ============================================ -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    // Basic configuration
    gtag('config', 'G-XXXXXXXXXX');

    // OPTIONAL: Advanced configuration
    /*
    gtag('config', 'G-XXXXXXXXXX', {
      'page_title': document.title,
      'page_location': window.location.href,
      'send_page_view': true,
      'allow_google_signals': true,
      'allow_ad_personalization_signals': true
    });
    */

    // OPTIONAL: Enable debug mode for testing
    /*
    gtag('config', 'G-XXXXXXXXXX', {
      'debug_mode': true
    });
    */

    // OPTIONAL: Track to multiple properties
    /*
    gtag('config', 'G-XXXXXXXXXX');  // Primary property
    gtag('config', 'G-YYYYYYYYYY');  // Secondary property
    */
  </script>
  <!-- End Google tag -->

  <!-- Other scripts and stylesheets -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <!-- ============================================ -->
  <!-- Your website content goes here              -->
  <!-- ============================================ -->

  <header>
    <h1>My Website</h1>
    <nav>
      <a href="/">Home</a>
      <a href="/about">About</a>
      <a href="/contact">Contact</a>
    </nav>
  </header>

  <main>
    <h2>Welcome to My Website</h2>

    <!-- Example: Track button click -->
    <button id="cta-button">Sign Up Now</button>

    <!-- Example: Track form submission -->
    <form id="contact-form" action="/submit" method="POST">
      <input type="email" name="email" placeholder="Your email" required>
      <button type="submit">Submit</button>
    </form>

    <!-- Example: Track product view -->
    <div class="product" data-product-id="SKU_123" data-product-name="Premium Widget" data-product-price="99.99">
      <h3>Premium Widget</h3>
      <p class="price">$99.99</p>
      <button class="add-to-cart">Add to Cart</button>
    </div>
  </main>

  <!-- ============================================ -->
  <!-- Custom Event Tracking Examples              -->
  <!-- Place before closing </body> tag            -->
  <!-- ============================================ -->
  <script>
    // ==================================================
    // EXAMPLE 1: Button Click Tracking
    // ==================================================
    document.getElementById('cta-button').addEventListener('click', function() {
      gtag('event', 'button_click', {
        'button_name': 'Sign Up Now',
        'button_location': 'homepage',
        'button_id': 'cta-button'
      });
    });

    // ==================================================
    // EXAMPLE 2: Form Submission Tracking
    // ==================================================
    document.getElementById('contact-form').addEventListener('submit', function(e) {
      e.preventDefault();  // Prevent immediate submission

      const email = this.email.value;
      const emailDomain = email.split('@')[1];

      // Send event to GA4
      gtag('event', 'form_submit', {
        'form_name': 'Contact Form',
        'form_id': 'contact-form',
        'email_domain': emailDomain  // Not PII - just domain
      });

      // Small delay ensures event is sent before navigation
      setTimeout(() => {
        this.submit();
      }, 100);
    });

    // ==================================================
    // EXAMPLE 3: Product View Tracking
    // ==================================================
    document.addEventListener('DOMContentLoaded', function() {
      const productElement = document.querySelector('.product');
      if (productElement) {
        const productId = productElement.getAttribute('data-product-id');
        const productName = productElement.getAttribute('data-product-name');
        const productPrice = parseFloat(productElement.getAttribute('data-product-price'));

        gtag('event', 'view_item', {
          'items': [{
            'item_id': productId,
            'item_name': productName,
            'price': productPrice,
            'quantity': 1
          }],
          'value': productPrice,
          'currency': 'USD'
        });
      }
    });

    // ==================================================
    // EXAMPLE 4: Add to Cart Tracking
    // ==================================================
    document.querySelectorAll('.add-to-cart').forEach(button => {
      button.addEventListener('click', function() {
        const productElement = this.closest('.product');
        const productId = productElement.getAttribute('data-product-id');
        const productName = productElement.getAttribute('data-product-name');
        const productPrice = parseFloat(productElement.getAttribute('data-product-price'));

        gtag('event', 'add_to_cart', {
          'items': [{
            'item_id': productId,
            'item_name': productName,
            'price': productPrice,
            'quantity': 1
          }],
          'value': productPrice,
          'currency': 'USD'
        });
      });
    });

    // ==================================================
    // EXAMPLE 5: User Authentication Tracking
    // ==================================================
    /*
    function trackLogin(userId, loginMethod) {
      // Set User ID for cross-device tracking
      gtag('set', {
        'user_id': 'user_' + userId
      });

      // Send login event
      gtag('event', 'login', {
        'method': loginMethod  // 'email', 'google', 'facebook', etc.
      });
    }

    // Usage after successful login
    // trackLogin('12345', 'email');
    */

    // ==================================================
    // EXAMPLE 6: User Logout Tracking
    // ==================================================
    /*
    function trackLogout() {
      // Send logout event
      gtag('event', 'logout');

      // CRITICAL: Clear User ID with null (not empty string)
      gtag('set', {
        'user_id': null
      });
    }

    // Usage on logout button click
    // document.getElementById('logout-btn').addEventListener('click', trackLogout);
    */

    // ==================================================
    // EXAMPLE 7: Custom Event with Multiple Parameters
    // ==================================================
    /*
    gtag('event', 'video_tutorial_watched', {
      'video_title': 'GA4 Basics',
      'video_duration': 1200,  // seconds
      'completion_percent': 100,
      'tutorial_category': 'Analytics'
    });
    */

    // ==================================================
    // EXAMPLE 8: Search Tracking
    // ==================================================
    /*
    document.getElementById('search-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const searchTerm = document.getElementById('search-input').value;

      gtag('event', 'search', {
        'search_term': searchTerm
      });

      // Perform search
      performSearch(searchTerm);
    });
    */

    // ==================================================
    // EXAMPLE 9: Scroll Depth Tracking
    // ==================================================
    /*
    const scrollTracked = {
      25: false,
      50: false,
      75: false,
      90: false
    };

    window.addEventListener('scroll', debounce(function() {
      const scrollPercent = (window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100;

      Object.keys(scrollTracked).forEach(threshold => {
        if (scrollPercent >= parseInt(threshold) && !scrollTracked[threshold]) {
          gtag('event', 'scroll_milestone', {
            'scroll_depth': parseInt(threshold),
            'page_path': window.location.pathname
          });
          scrollTracked[threshold] = true;
        }
      });
    }, 500));

    function debounce(func, wait) {
      let timeout;
      return function() {
        clearTimeout(timeout);
        timeout = setTimeout(() => func.apply(this, arguments), wait);
      };
    }
    */

    // ==================================================
    // EXAMPLE 10: Error Tracking
    // ==================================================
    /*
    window.addEventListener('error', function(event) {
      gtag('event', 'exception', {
        'description': event.message,
        'fatal': false,
        'error_location': event.filename + ':' + event.lineno
      });
    });
    */
  </script>

</body>
</html>

<!--
=================================================================
GA4 gtag.js Complete Template
=================================================================

VERSION: 1.0
LAST UPDATED: November 2025
MAINTAINED BY: GA4 Skills Repository

USAGE INSTRUCTIONS:
1. Replace 'G-XXXXXXXXXX' with your actual Measurement ID (2 occurrences)
2. Find Measurement ID: GA4 Admin → Data Streams → Web Stream
3. Uncomment examples you want to use
4. Customize event names and parameters for your needs
5. Test implementation with GA4 DebugView before production

VERIFICATION:
1. Install Google Tag Assistant Chrome extension
2. Visit your page and verify "Google Analytics: GA4" tag is working
3. Check GA4 Realtime reports for active users and events
4. Use Admin → DebugView for detailed event inspection

IMPORTANT NOTES:
- Place gtag snippet in <head> section
- Use async attribute (already included)
- Clear User ID with null, never empty string
- Register custom parameters as custom dimensions in GA4 Admin
- Wait 24-48 hours for custom dimensions to appear in reports

PERFORMANCE:
- gtag.js loads asynchronously (non-blocking)
- Typical load time: 50-100ms
- Minimal page performance impact (<50ms Total Blocking Time)

RELATED SKILLS:
- ga4-setup - Initial property configuration
- ga4-events-fundamentals - Understanding event structure
- ga4-recommended-events - Standard event implementations
- ga4-debugview - Testing and validation
- ga4-custom-events - Creating business-specific events

OFFICIAL DOCUMENTATION:
- developers.google.com/tag-platform/gtagjs
- developers.google.com/analytics/devguides/collection/ga4
=================================================================
-->
